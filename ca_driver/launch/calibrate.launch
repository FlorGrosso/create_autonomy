<launch>
  <arg name="robot_id"  default="$(optenv ID 1)"      doc="Unique identifier of the robot [1-Inf.)"/>
  <arg name="ns"        value="create$(arg robot_id)" doc="Namespace of the robot. By default: create1"/>
  <arg name="tf_prefix" value="$(arg ns)_tf"          doc="Tf prefix"/>
  <!--
    This calibration process needs to have a LaserScan topic available
   -->
  <group ns="$(arg ns)">
    <node pkg="ca_driver" type="scan_to_angle.py" name="scan_to_angle" >
      <param name="min_angle" value="-0.3" />
      <param name="max_angle" value="0.3" />
    </node>

    <node pkg="ca_driver" type="calibrate.py" name="robot_calibration" output="screen" required="true">
      <remap from="cmd_vel" to="cmd_vel" />
      <remap from="imu"     to="mobile_base/sensors/imu_data_raw" />
      <remap from="odom"    to="odom" />
      <!-- Wait time until these messages are received:
        - IMU
        - Scan angle from scan_to_angle node
        - Odometry
       -->
      <param name="buffer_time" value="0.5"/>
    </node>
  </group>

</launch>